--WipStockTakingList_現場棚卸リスト SQL
DECLARE @IS_ISSUE_INV_BAL Bit = 0        --理論値発行分類: 0.発行しない 1.発行する必要
DECLARE @PHYSICAL_CNT_YYMM INT = 201608
DECLARE @WS_CD VARCHAR(10) = ''
DECLARE @PROCESS_CD VARCHAR(10) = ''

SELECT  PH.PHYSICAL_CNT_YYMM ,    PH.WS_CD  ,    WS.WS_DESC ,
   PH.PROCESS_CD ,     PRO.PROCESS_DESC ,   CONVERT(INT ,PH.PAGE_NO) AS PAGE_NO,
   PH.LINE_NO  ,PH.ITEM_NO  ,I.ITEM_DESC  , PH.JOC_CD ,PH.LOT_NO,PH.INV_BAL ,
   PH.ITEM_UMSR ,S.DATA_CHAR AS UMSR_NAME
 FROM PHISICAL_COUNT PH
 LEFT JOIN WORKSHOP_MASTER  WS  on  PH.WS_CD=WS.WS_CD
 LEFT JOIN PROCESS_MASTER   PRO on  PRO.PROCESS_CD=PH.PROCESS_CD
 LEFT JOIN ITEM_MASTER      I   on  I.ITEM_NO=PH.ITEM_NO
 LEFT JOIN SYSTEM_PARAMETER S   on  S.KEY01='ITEM_UMSR' AND S.KEY02=PH.ITEM_UMSR
 WHERE 1=1
 AND PH.PHYSICAL_CNT_STATUS<=20 
 AND PH.INV_TYPE=0 
 AND PH.INV_WIP_TYPE=1  
 AND (PH.PHYSICAL_CNT_YYMM = @PHYSICAL_CNT_YYMM or @PHYSICAL_CNT_YYMM = 0)
 AND (PH.WS_CD = @WS_CD or @WS_CD = '')
 AND (PH.PROCESS_CD = @PROCESS_CD or @PROCESS_CD = '')
 ORDER BY PH.PHYSICAL_CNT_YYMM, PH.LINE_NO  